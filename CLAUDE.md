# CLAUDE.md

이 파일은 이 저장소에서 코드 작업을 할 때 Claude Code (claude.ai/code)에게 지침을 제공합니다.

## 언어 지침
모든 대화는 한글로 진행합니다.

## 프로젝트 개요
이것은 "리튼" (Litten)이라고 불리는 크로스 플랫폼 노트 앱으로, 리튼 공간을 중심으로 음성 듣기, 텍스트 쓰기, 이미지 파일 위에 필기(draw) 기능을 통합 지원합니다. 

### 핵심 개념
- **리튼 공간**: 디렉토리 개념으로 각 리튼 안에 듣기, 쓰기 데이터가 통합 관리됨
- **듣기**: 음성 녹음
- **텍스트**: 텍스트 파일을 만드는 것
- **필기**: 이미지 파일 위에 필기(draw)를 하는 행위 
- **3단계 구독 모델**: 
  * 무료(Free): 리튼 생성 최대 5개, 듣기 파일 최대 10개, 쓰기 텍스트 5개, 필기 5개 제한
  * 스탠다드(Standard): 리튼 및 파일 수 제한 없음, 광고 제거
  * 프리미엄(Premium): 로그인 및 파일 서버 보관
- **30개 언어 지원**: 글로벌 사용자를 위한 다국어 인터페이스
- **시스템 언어 자동 감지**: 앱 설치 시 시스템 언어를 자동으로 감지하여 30개 지원 언어 중 해당 언어로 자동 설정
- **언어별 테마 자동 선택**: 감지된 언어/국가에 따라 해당 지역이 선호하는 5가지 테마(Classic Blue, Dark Mode, Nature Green, Sunset Orange, Monochrome Grey) 중 자동으로 선택되어 적용
- **크로스 플랫폼**: Android, iOS 지원

### 기술 스택
#### Frontend
- **Framework**: Flutter (Dart)
- **상태 관리**: Provider 패턴
- **UI**: Material Design 3
- **플랫폼**: Android, iOS
- **텍스트**: html-editor-enhanced
- **필기(draw)**: flutter_painter_v2

#### Backend  
- **Framework**: Java Spring Boot
- **데이터베이스**: MariaDB
- **파일 저장소**: AWS S3
- **API**: RESTful API
- **인증**: JWT + 앱 고유 ID

## 개발 단계별 계획

### 1차 개발: 무료 버전 (1-2개월)
- **타겟**: 모바일 앱 (Android/iOS) 핵심 기능 완성
- **핵심 기능**: 
  * 듣기, 재생
  * 텍스트 쓰기 
  * 필기 (pdf→png 변환 및 png 위에 draw)
  * 로컬 저장
  * 30개 언어 + 5가지 테마
  * 무료버젼: 광고 표시
  * 스텐다드 플랜: 광고 제거, 리튼 및 파일 수 제한 없음 
  * 구독 결제 시스템 (스탠다드 플랜)
- **결과**: 앱스토어 출시

### 2차 개발: 프리미엄 버전 (3-4개월)
- **타겟**: 파일 서버 동기화 
- **핵심 기능**:
  * 사용자 로그인 시스템
  * 백엔드 서버 구축
  * 파일 동기화
  * 구독 결제 시스템 (프리미엄 플랜)
- **결과**: 프리미엄 서비스 런칭


## 아키텍쳐

### 아키텍쳐 개요 
리튼(Litten) 앱은 Clean 아키텍쳐 SOLID 원칙을 기반으로 설계됩니다. 이를 통해 코드의 유지보수성, 테스트 용이성, 확장성을 향상시킵니다.

UI Layer: 사용자 인터페이스 컴포넌트 ( Flutter 컴포넌트 )
Application Layer: 사용자 케이스 구현 ( 리튼, 듣기(녹음), 쓰기(텍스트,필기) 등 )
Domain Layer: 핵심 비즈니스 로직과 엔티티 ( 녹음, 텍스트 쓰기, 이미지 필기 )
Infrastructure Layer: 외부 라이브러리와의 인터페이스 ( 로그인, 서버에 리튼 및 파일 동기화)

### Clean 아키텍쳐 적용
Clean Architecture에 따라 프로젝트 구조를 다음과 같이 구성합니다:
litten/
├── frontend/                   # Flutter 앱 메인 디렉토리 (예정)
│   ├── lib/
│   │   ├── main.dart           # 앱 진입점
│   │   ├── config/             # 앱 설정
│   │   ├── services/           # 핵심 비즈니스 로직과 데이터 모델
│   │   ├── usecases/           # 애플리케이션 특화 비즈니스 규칙
│   │   ├── adapters/           # 외부 라이브러리와의 인터페이스
│   │   ├── frameworks/         # UI 컴포넌트, 상태 관리 등
│   │   ├── widgets/            # 재사용 컴포넌트
│   │   └── l10n/               # 다국어 지원 파일
│   ├── pubspec.yaml            # Flutter 의존성 관리
│   └── test/                   # 테스트 파일들
├── backend/            # spring boot backend 메인 디렉토리 (예정)
├── docs/               # 프로젝트 문서 (현재 위치)
└── CLAUDE.md           # Claude 개발 지침

### 핵심 개발 원칙 
SOLID 원칙 적용
  - 단일 책임 원칙(SRP): 각 컴포넌트와 함수는 하나의 책임만 가집니다.
  - 개방-폐쇄 원칙(OCP): 새로운 기능을 추가할 때 기존 코드를 수정하지 않고 확장할 수 있도록 설계합니다.
  - 리스코프 치환 원칙(LSP): 상위 타입의 객체를 하위 타입의 객체로 대체해도 프로그램의 정확성이 유지되도록 합니다.
  - 인터페이스 분리 원칙(ISP): 클라이언트가 사용하지 않는 인터페이스에 의존하지 않도록 합니다.
  - 의존성 역전 원칙(DIP): 고수준 모듈이 저수준 모듈에 의존하지 않도록 추상화에 의존합니다.
개발 요구사항
  - 기획 문서들을 검토하고 이해합니다.
  - 구체적인 개발 TODO 체크리스트를 작성합니다.
  - 생성할 파일과 디렉토리 구조를 정의합니다.
  - 기존 프로젝트가 있다면 코드베이스를 읽고 이해합니다.
로그를 상세히 적극적으로 작성합니다
  - 개발에서는 개발 및 디버깅 용도로 사용
  - 운영에서는 에러의 추적 및 디버깅용으로 사용
  - debug, info, error로 로그를 구분
  - debug 외부 모듈 사용 시 사용 클래스, 메소드를 출력, 클래스 명이 모호할 경우 파일명과, 메소드를 출력
  - debug 함수 진입/종료 지점
  - debug 버튼 클릭이나 액션을 했을때 어떤 액션인지, 진입 어떤 클래스인지 어떤 메소드는 무엇인지에 대한 로깅
  - info 주요 변수 값 변경
  - info API 요청/응답
  - info 잠재적 오류 지점
  - info 조건 분기 결과
  - 문제 발생 시 근본 원인 분석, 각 원인별 식별 로그 생성, 세분화된 디버깅 포인트 추가, 로그 결과로 정확한 위치를 파악, 원인 제거 방식을 단계적으로 적용
품질 우선
  - 기능, 코드 품질, 성능, 보안을 동시에 고려합니다.
품질 확인: 품질에 대해 항상 다음을 확인합니다
  - 코드 품질 개선 기회
  - 성능 최적화 가능성  
  - 보안 취약점 존재 여부
  - 테스트 필요 여부
절대 하지 말아야 할 것
  - 대규모/복잡한 변경
  - 의도하지 않은 결과를 그대로 둠
  - 문맥 과부하 발생
  - 나쁜 코드 확산
  - 계획 없이 즉흥적 코딩  
즉시 중단해야 할 상황 다음이 감지되면 즉시 중단하세요
  - 계획과 다른 방향으로 진행 중
  - 코드가 복잡해짐
  - 오류 원인을 이해하지 못함
  - 변경 범위가 예상보다 큼

### 계획된 핵심 구조
- **Provider 패턴**: 상태 관리를 위한 `provider` 패키지 사용 예정
- **서비스 레이어**: 각 기능별 서비스 분리 (오디오, 텍스트, 필기, 설정 등)
- **다국어 지원**: 30개 언어를 위한 Flutter 국제화 적용 완료
- **중앙화된 설정**: `lib/config/` 에서 앱 전체 설정 관리
- **기본 언어**: 영어 (en)

### 계획된 주요 구성 요소

#### 1단계: 기본 앱 구조 
- `AppConfig`: 앱 전체 설정 관리(유료/무료 포함)
- `LocaleProvider`: 다국어 지원 상태 관리
- `NavigationService`: 화면 전환 관리
- `PreferencesService`: 사용자 설정 저장/불러오기
- `NoteService`: 리튼 공간 생성/관리
- `AudioService`: 음성 녹음/재생
- `TextService`: 텍스트 작성/편집
- `DrawingService`: 필기
- `StorageService`: 로컬 파일 관리

#### 2단계: 고급 기능
- `ExportService`: 파일 내보내기
- `SearchService`: 내용 검색
- `BackupService`: 로컬 백업
- `SyncService`: 서버 동기화

## 다국어 지원 계획

### 지원 언어 (30개) - 1단계에서 모두 지원 (사용자 제공 순서)
1. 영어 (en) - English (기본값)
2. 중국어 (zh) - Chinese
3. 힌디어 (hi) - हिन्दी
4. 스페인어 (es) - Español
5. 프랑스어 (fr) - Français
6. 아랍어 (ar) - العربية
7. 벵골어 (bn) - বাংলা
8. 러시아어 (ru) - Русский
9. 포르투갈어 (pt) - Português
10. 우르두어 (ur) - اردو
11. 인도네시아어 (id) - Bahasa Indonesia
12. 독일어 (de) - Deutsch
13. 일본어 (ja) - 日本語
14. 스와힐리어 (sw) - Kiswahili
15. 마라티어 (mr) - मराठी
16. 텔루구어 (te) - తెలుగు
17. 터키어 (tr) - Türkçe
18. 타밀어 (ta) - தமிழ்
19. 페르시아어 (fa) - فارسی
20. 한국어 (ko) - 한국어
21. 우크라이나어 (uk) - Українська
22. 이탈리아어 (it) - Italiano
23. 타갈로그어 (tl) - Filipino
24. 폴란드어 (pl) - Polski
25. 파슈토어 (ps) - پښتو
26. 말레이어 (ms) - Bahasa Melayu
27. 로마니아어 (ro) - Română
28. 네덜란드어 (nl) - Nederlands
29. 하우사어 (ha) - Hausa
30. 태국어 (th) - ไทย

### 구현 계획
- ARB 파일을 `lib/l10n/` 에 배치 예정
- Flutter 기본 국제화 시스템 사용
- 첫 실행 시 기본 언어 선택 화면 제공
- 기본 언어: 영어 (en)
- SharedPreferences로 언어 설정 저장

### 개발 우선순위
**1단계에서 30개 언어 모두 지원 **

구현 순서 (위의 지원 언어 목록 순서대로):
1. 영어 (en) - English (기본값)
2. 중국어 (zh) - Chinese
3. 힌디어 (hi) - हिन्दी
4. 스페인어 (es) - Español
5. 프랑스어 (fr) - Français
6. 아랍어 (ar) - العربية
7. 벵골어 (bn) - বাংলা
8. 러시아어 (ru) - Русский
9. 포르투갈어 (pt) - Português
10. 우르두어 (ur) - اردو
11. 인도네시아어 (id) - Bahasa Indonesia
12. 독일어 (de) - Deutsch
13. 일본어 (ja) - 日本語
14. 스와힐리어 (sw) - Kiswahili
15. 마라티어 (mr) - मराठी
16. 텔루구어 (te) - తెలుగు
17. 터키어 (tr) - Türkçe
18. 타밀어 (ta) - தமிழ்
19. 페르시아어 (fa) - فارسی
20. 한국어 (ko) - 한국어
21. 우크라이나어 (uk) - Українська
22. 이탈리아어 (it) - Italiano
23. 타갈로그어 (tl) - Filipino
24. 폴란드어 (pl) - Polski
25. 파슈토어 (ps) - پښتو
26. 말레이어 (ms) - Bahasa Melayu
27. 로마니아어 (ro) - Română
28. 네덜란드어 (nl) - Nederlands
29. 하우사어 (ha) - Hausa
30. 태국어 (th) - ไทย

**구현 현황**: 30/30 언어
