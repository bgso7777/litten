# 리튼 홈페이지 및 노트 기능 페이지

## 개요
- **시작 시간**: 2025-10-17 08:42 (KST)
- **세션 목적**: 리튼 앱의 홈페이지 및 노트 기능 페이지 개발

## 목표
1. 리튼 홈페이지 UI/UX 개선 및 기능 구현
2. 노트 기능 페이지 개발 및 완성
3. iOS 및 Android 플랫폼에서 정상 작동 확인

## 진행 상황
- iOS 시뮬레이터 (iPhone 16 Pro) 실행 완료
- Android 에뮬레이터 (Medium Phone API 36) 실행 완료
- Flutter 앱 빌드 및 실행 완료

## 다음 단계
- 홈페이지 및 노트 기능 페이지 상세 요구사항 확인
- 기능 구현 계획 수립

---

### 업데이트 - 2025-10-17 오전 09:58

**요약**: 리튼 브랜드 홈페이지 및 노트 기능 소개 페이지 개발 완료, 백엔드 서버 배포 완료

**Git 변경 사항**:
- 수정됨:
  - backend/src/main/webapp/index.html (브랜드 홈페이지)
  - backend/src/main/java/com/litten/common/security/SecurityConfiguration.java (정적 리소스 접근 허용)
- 추가됨:
  - backend/src/main/webapp/note.html (노트 기능 소개 페이지)
  - backend/src/main/java/com/litten/web/HomeController.java (HTML 서빙 컨트롤러)
  - backend/src/main/resources/static/ (정적 리소스 폴더)
  - backend/src/main/resources/public/ (public 리소스 폴더)
  - .claude/sessions/2025-10-17-0842-리튼-홈페이지-및-노트-기능-페이지.md (세션 파일)
- 현재 브랜치: main (커밋: e56329a 서버 설정 변경)

**할 일 진행 상황**: 완료 6건, 진행 중 0건, 대기 중 0건
- ✓ 완료됨: 백엔드 디렉토리 구조 확인
- ✓ 완료됨: 리튼 브랜드 소개 홈페이지 HTML 작성
- ✓ 완료됨: 노트 기능 소개 페이지 HTML 작성
- ✓ 완료됨: 스타일 및 반응형 디자인 구현
- ✓ 완료됨: 백엔드 서버 실행 및 테스트
- ✓ 완료됨: 크롬 브라우저에서 확인

**구현된 기능**:

1. **리튼 브랜드 홈페이지** (index.html)
   - 모던한 그라데이션 히어로 섹션
   - 핵심 기능 소개 (듣기, 쓰기, 필기)
   - 앱 소개 섹션 (리튼 공간, 30개 언어 지원, 크로스 플랫폼)
   - 3단계 요금제 (무료, 스탠다드, 프리미엄)
   - 반응형 디자인 및 부드러운 스크롤 애니메이션

2. **노트 기능 상세 페이지** (note.html)
   - 탭 방식 UI (듣기, 쓰기, 필기)
   - 각 기능별 상세 설명 및 주요 기능 리스트
   - 활용 사례 카드 (학생, 비즈니스, 인터뷰 등)
   - PDF→PNG 변환 및 필기 기능 강조
   - 반응형 디자인

3. **백엔드 서버 설정**
   - Spring Boot 서버 빌드 및 실행 (포트 8989)
   - Context Path: /litten
   - HomeController를 통한 HTML 서빙
   - Security 설정에 정적 리소스 접근 허용 추가
   - Java 17 환경 설정

**발생한 이슈**:
1. 초기에 HTTP 404 오류 발생
   - 원인: Spring Boot WAR 패키징에서 정적 파일을 찾지 못함
   - Spring Security가 정적 리소스 접근 차단
   - Context Path가 `/litten`인 것을 인지하지 못함

**구현된 해결책**:
1. HomeController 생성하여 ClassPathResource로 HTML 파일 직접 서빙
2. Security Configuration에 정적 리소스 경로 허용 추가
   - `requestMatchers("/", "/index.html", "/note.html", "/test").permitAll()`
3. static, public 폴더에 HTML 파일 복사
4. Context Path 확인 후 올바른 URL로 접속
   - http://localhost:8989/litten/ (홈페이지)
   - http://localhost:8989/litten/note.html (노트 페이지)

**추가 작업**:
- Flutter 웹 빌드 실행 완료
  - 빌드 결과물 위치: frontend/build/web/
  - 주요 파일: index.html, main.dart.js (4.5MB), assets/, canvaskit/

**실행 중인 서비스**:
- iOS 시뮬레이터 (iPhone 16 Pro) - Flutter 앱 실행 중
- Android 에뮬레이터 (Medium Phone API 36) - Flutter 앱 실행 중
- 백엔드 서버 (http://localhost:8989/litten/) - 홈페이지 서빙 중

**다음 단계**:
- 홈페이지 디자인 개선 및 사용자 피드백 반영
- 실제 앱 스토어 배포 준비
- 프리미엄 기능 개발 시작

---

## 세션 종료 요약

**종료 시간**: 2025-10-17 오전 09:59 (KST)
**세션 소요 시간**: 약 1시간 17분 (08:42 ~ 09:59)

### Git 변경 사항 전체 요약

**전체 변경 파일 수**: 8개
- **수정됨 (M)**: 4개
  - `.claude/sessions/.current-session`
  - `0_history.txt`
  - `backend/src/main/java/com/litten/common/security/SecurityConfiguration.java`
  - `backend/src/main/webapp/index.html`

- **추가됨 (??)**:  4개
  - `.claude/sessions/2025-10-17-0842-리튼-홈페이지-및-노트-기능-페이지.md`
  - `backend/src/main/java/com/litten/web/HomeController.java` (새 컨트롤러)
  - `backend/src/main/resources/public/` (디렉토리 + 2개 파일)
  - `backend/src/main/resources/static/` (디렉토리 + 2개 파일)
  - `backend/src/main/webapp/note.html`

**수행된 커밋 수**: 0건 (모든 변경사항은 작업 디렉토리에 유지)

**최종 Git 상태**:
- 브랜치: main
- 마지막 커밋: e56329a (서버 설정 변경)
- Unstaged/Untracked 파일 8개

### 할 일 요약

**완료된 작업**: 7건
1. ✓ Flutter 클린 빌드 수행
2. ✓ iOS 및 Android 시뮬레이터 확인 및 부팅
3. ✓ iOS 및 Android 앱 빌드 및 실행
4. ✓ 백엔드 디렉토리 구조 확인
5. ✓ 리튼 브랜드 소개 홈페이지 HTML 작성
6. ✓ 노트 기능 소개 페이지 HTML 작성
7. ✓ 스타일 및 반응형 디자인 구현
8. ✓ 백엔드 서버 실행 및 테스트
9. ✓ 크롬 브라우저에서 확인
10. ✓ Flutter 웹 빌드 경로 확인

**미완료 작업**: 없음 (모든 계획된 작업 완료)

### 주요 성과

1. **리튼 브랜드 웹사이트 개발 완료**
   - 홈페이지와 노트 기능 소개 페이지 2개 생성
   - 반응형 디자인으로 모바일/데스크톱 모두 지원
   - 모던한 UI/UX (그라데이션, 애니메이션, 카드 레이아웃)

2. **백엔드 배포 인프라 구축**
   - Spring Boot 서버 설정 완료
   - Java 17 환경 구성
   - Security 설정 최적화

3. **크로스 플랫폼 테스트 환경 구축**
   - iOS 시뮬레이터 실행
   - Android 에뮬레이터 실행
   - Flutter 웹 빌드 완료

### 구현된 전체 기능

#### 1. 리튼 브랜드 홈페이지 (index.html)
- **크기**: 15,365 bytes
- **주요 섹션**:
  - 네비게이션 바 (고정, 반투명 블러 효과)
  - 히어로 섹션 (보라색 그라데이션 배경)
  - 핵심 기능 3개 카드 (듣기, 쓰기, 필기)
  - 앱 소개 섹션 3개 (리튼 공간, 30개 언어, 크로스 플랫폼)
  - 요금제 비교 섹션 (무료/스탠다드/프리미엄)
  - 푸터
- **스타일**:
  - Material Design 3 스타일
  - 그라데이션 배경 (보라-핑크)
  - 호버 애니메이션
  - fadeInUp 스크롤 애니메이션
  - 반응형 그리드 (CSS Grid)
- **JavaScript 기능**:
  - 부드러운 스크롤
  - Intersection Observer API 활용 애니메이션

#### 2. 노트 기능 상세 페이지 (note.html)
- **크기**: 19,448 bytes
- **주요 섹션**:
  - 탭 메뉴 (듣기, 쓰기, 필기)
  - 각 탭별 상세 설명
  - 기능 showcase (2단 레이아웃)
  - 활용 사례 카드 (3-4개씩)
  - CTA 섹션 (녹색 그라데이션)
- **탭 구성**:
  - 듣기: 고품질 녹음, 백그라운드 녹음, 재생 속도 조절
  - 쓰기: HTML 에디터, 포맷팅, 링크/이미지/표 삽입
  - 필기: PDF→PNG 변환, 펜 도구, 확대/축소
- **JavaScript 기능**:
  - 탭 전환 기능
  - 탭 선택 시 부드러운 스크롤
  - 카드 애니메이션

#### 3. 백엔드 HomeController
- **위치**: `backend/src/main/java/com/litten/web/HomeController.java`
- **기능**:
  - `/`, `/index.html` 엔드포인트로 홈페이지 서빙
  - `/note.html` 엔드포인트로 노트 페이지 서빙
  - `/test` 엔드포인트로 서버 상태 확인
  - ClassPathResource 사용하여 파일 로드
  - 파일 존재 여부 체크 및 에러 핸들링

#### 4. Security 설정 업데이트
- **변경 내용**:
  - 정적 리소스 경로 허용 추가
  - `/`, `/index.html`, `/note.html`, `/test` 경로 permitAll
  - `/*.html`, `/*.css`, `/*.js` 등 정적 파일 패턴 허용

### 발생한 문제와 해결책

#### 문제 1: HTTP 404 오류 (정적 파일 서빙 실패)
**원인**:
- Spring Boot WAR 패키징 방식에서 webapp 폴더의 정적 파일을 직접 서빙하지 못함
- resources/static 폴더로 이동해도 파일을 찾지 못함
- Spring Security가 접근을 차단

**해결책**:
1. HomeController 생성하여 ClassPathResource로 HTML 직접 서빙
2. Security Configuration에 정적 리소스 경로 허용
3. static과 public 폴더에 파일 복사 (여러 경로 시도)

#### 문제 2: Context Path 인식 오류
**원인**:
- 서버가 `/litten` context path로 실행 중이었으나 이를 인지하지 못함
- `http://localhost:8989/` 대신 `http://localhost:8989/litten/`로 접속해야 함

**해결책**:
- 로그에서 "Tomcat started on port 8989 (http) with context path '/litten'" 확인
- 올바른 URL로 접속

#### 문제 3: Java 환경 문제
**원인**:
- 초기 Maven 빌드 시 Java runtime을 찾지 못함
- 잘못된 Java 버전 사용

**해결책**:
- OpenJDK 17 경로 확인 (`/opt/homebrew/Cellar/openjdk@17/17.0.16/`)
- JAVA_HOME 환경변수 설정
- Maven 빌드 시 매번 환경변수 명시

### 주요 변경 사항 및 발견

1. **Context Path 설정**: 백엔드 서버가 `/litten` context path로 실행됨을 확인
2. **Spring Boot WAR vs JAR**: WAR 패키징 시 정적 파일 서빙 방식이 다름
3. **Security 우선순위**: Security 필터가 Controller보다 먼저 적용되므로 허용 설정 필수
4. **Flutter 웹 빌드**: `frontend/build/web/` 경로에 4.5MB의 JavaScript 파일 생성

### 추가/제거된 종속성

**추가됨**: 없음 (기존 Spring Boot, Flutter 종속성만 사용)
**제거됨**: 없음

### 설정 변경 사항

1. **Security Configuration**:
   - 정적 리소스 접근 허용 규칙 추가
   - requestMatchers 패턴 확장

2. **디렉토리 구조**:
   - `backend/src/main/resources/static/` 생성
   - `backend/src/main/resources/public/` 생성
   - `backend/src/main/java/com/litten/web/` 생성

### 수행된 배포 단계

1. ✓ Flutter 클린 빌드
2. ✓ iOS 시뮬레이터 부팅 및 앱 실행
3. ✓ Android 에뮬레이터 부팅 및 앱 실행
4. ✓ Maven 클린 빌드 (backend)
5. ✓ WAR 파일 생성
6. ✓ Spring Boot 서버 실행 (포트 8989)
7. ✓ 크롬 브라우저에서 접속 확인
8. ✓ Flutter 웹 빌드 완료

### 얻은 교훈

1. **Spring Boot WAR 패키징 시 정적 파일 서빙**:
   - `webapp` 폴더는 외장 톰캣용, 내장 톰캣에서는 작동 안 함
   - `resources/static` 또는 Controller를 통한 직접 서빙 필요
   - Security 설정이 정적 리소스도 차단할 수 있음

2. **Context Path 중요성**:
   - 서버 로그를 꼼꼼히 확인해야 함
   - Context path가 있으면 모든 URL에 반영됨

3. **환경 설정의 일관성**:
   - Java 환경변수를 매번 명시적으로 설정
   - 백그라운드 프로세스에서는 환경변수가 유지되지 않을 수 있음

4. **디버깅 전략**:
   - 간단한 테스트 엔드포인트(`/test`) 먼저 확인
   - 로그에서 Controller 매핑 여부 확인
   - 404 에러 시 Security, Context Path, 파일 경로 순서로 체크

### 완료되지 않은 작업

**없음** - 모든 계획된 작업이 완료됨

### 미래 개발자를 위한 팁

1. **홈페이지 수정 시**:
   - HTML 파일: `backend/src/main/webapp/index.html` 및 `note.html`
   - 수정 후 `static`과 `public` 폴더에도 복사 필요
   - Maven 빌드 필수: `mvn clean package -DskipTests`

2. **서버 실행**:
   ```bash
   export JAVA_HOME=/opt/homebrew/Cellar/openjdk@17/17.0.16/libexec/openjdk.jdk/Contents/Home
   export PATH="$JAVA_HOME/bin:$PATH"
   java -jar backend/target/litten-backend-0.0.1.war
   ```
   - 접속: http://localhost:8989/litten/

3. **새로운 정적 페이지 추가 시**:
   - `HomeController.java`에 새 엔드포인트 추가
   - `SecurityConfiguration.java`에 경로 허용 추가
   - `webapp`, `static`, `public` 세 곳에 모두 파일 배치

4. **Flutter 웹 배포 시**:
   - 빌드: `flutter build web --release`
   - 결과물: `frontend/build/web/`
   - 서빙: Python HTTP 서버 또는 Nginx 사용 권장

5. **모바일 앱 테스트**:
   - iOS: `flutter run -d 9E7DE80B-533A-42CF-BDB3-C9A65E44C1A3`
   - Android: `flutter run -d emulator-5554`
   - Hot reload: `r` 키

### 현재 실행 중인 서비스 (세션 종료 시)
- iOS 시뮬레이터 (iPhone 16 Pro) - Flutter 앱
- Android 에뮬레이터 (Medium Phone API 36) - Flutter 앱
- 백엔드 서버 (http://localhost:8989/litten/)

### 최종 산출물
- ✅ 리튼 브랜드 홈페이지 (완성)
- ✅ 노트 기능 소개 페이지 (완성)
- ✅ 백엔드 서버 배포 (완성)
- ✅ Flutter 웹 빌드 (완성)
- ✅ 모바일 앱 실행 환경 (완성)

**세션 성공적으로 완료** 🎉
